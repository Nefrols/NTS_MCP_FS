// Aristo 22.12.2025
package ru.nts.tools.mcp.core;

import com.fasterxml.jackson.databind.JsonNode;

/**
 * Базовый интерфейс для реализации инструментов (Tools) в рамках Model Context Protocol.
 * Каждая реализация представляет собой атомарную функцию, которую LLM может вызывать
 * для взаимодействия с файловой системой, системой контроля версий или инструментами сборки.
 */
public interface McpTool {

    /**
     * Возвращает уникальное имя инструмента.
     * Это имя используется LLM в поле 'name' при выполнении запроса 'tools/call'.
     *
     * @return Техническое имя инструмента (например, "read_file").
     */
    String getName();

    /**
     * Возвращает краткое описание назначения инструмента.
     * Это описание помогает LLM понять, в каких ситуациях следует вызывать данный инструмент.
     * Описание должно быть лаконичным для экономии контекстного окна модели.
     *
     * @return Текстовое описание функционала.
     */
    String getDescription();

    /**
     * Возвращает схему входных параметров инструмента в формате JSON Schema.
     * Схема используется MCP клиентом для валидации запросов и моделью для понимания аргументов.
     *
     * @return JsonNode, содержащий спецификацию параметров (типы, описания, обязательность).
     */
    JsonNode getInputSchema();

    /**
     * Выполняет основную бизнес-логику инструмента.
     * Реализация должна обеспечивать безопасность операций и возвращать результат в формате,
     * совместимом с MCP (обычно объект с массивом 'content').
     *
     * @param params JSON-узел с аргументами, переданными LLM.
     *
     * @return JSON-узел с результатом выполнения (текст, данные или отчет об ошибке).
     *
     * @throws Exception Если выполнение невозможно из-за ошибок валидации, прав доступа или системных сбоев.
     */
    JsonNode execute(JsonNode params) throws Exception;
}
# План улучшения обратной связи MCP (Density & Efficiency)

## 1. EditFileTool: Проактивная диагностика
- [ ] **Возврат актуального контента при ошибке `expectedContent`**
    - Если проверка не прошла, сервер должен вернуть реальный текст из указанного диапазона.
    - **Цель**: Избежать лишнего вызова `read_file` для синхронизации контекста.

## 2. ListDirectoryTool: Глубокое зрение
- [ ] **Рекурсивный листинг (`depth`)**
    - Добавить возможность просмотра дерева директорий на заданную глубину (по умолчанию 1).
- [ ] **Индикация доступа (Read Status)**
    - Помечать файлы, которые уже были прочитаны (на основе `AccessTracker`).
    - **Цель**: Мгновенная навигация и понимание границ "песочницы" на запись.

## 3. ReadFileTool: Обогащенный контекст
- [ ] **Метаданные при чтении**
    - Включать в ответ размер, кодировку и CRC32.
    - **Цель**: Получение полной картины о файле за один системный вызов.

## 4. SearchFilesTool: Интеллектуальное ранжирование
- [ ] **Маркировка известных файлов**
    - Помечать в результатах поиска файлы, содержимое которых LLM уже видела.
    - **Цель**: Помочь LLM быстрее выбирать релевантные файлы для правок.

## 5. Операции структуры: Авто-листинг
- [ ] **Отчет о состоянии после Move/Rename/Create**
    - После успешной операции возвращать список файлов в целевой директории.
    - **Цель**: Визуальное подтверждение успеха без проверочных вызовов `list_directory`.
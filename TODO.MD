# План улучшения MCP инструментов (Inspired by line_edit)

## Общие принципы реализации
- [x] **TDD подход**: На каждый чих — тест.
- [x] **Валидация**: Проверка целостности после правок.
- [x] **Обратная совместимость**: Старые методы работают.

---

# ЭТАП: Глобальная атомарность и UNDO/REDO (ЗАВЕРШЕНО)
- [x] Transaction Manager, Nesting, Undo/Redo, batch_tools.

---

# НОВЫЙ ЭТАП: Оптимизация и Отказоустойчивость

## 1. Защита от OOM и Бинарных данных
- [ ] **FileSize Limits**: Ограничение размера файлов для текстовых операций.
- [ ] **Binary Safety**: Определение и пропуск нетекстовых файлов.
- [ ] **Memory-Efficient Search**: Потоковое чтение при поиске вместо загрузки в String.

## 2. Оптимизация IO
- [ ] **Single-pass IO**: Минимизация повторных открытий файлов.
- [ ] **PathSanitizer Speed**: Оптимизация горячих путей проверки безопасности.

## 3. Надежность Транзакций
- [ ] **Transaction Integrity**: Улучшенная диагностика проваленных откатов.
- [ ] **Storage Management**: Очистка временных снимков.

## 4. Тестирование
- [ ] Стресс-тест на файлы большого размера (100MB+).
- [ ] Тест на бинарные файлы.